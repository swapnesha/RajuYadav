<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        header {
            background-color: #ff880a;
            text-align: center;
            padding: 20px;
        }
        header img {
            max-width: 100px;
        }
        .profile-section {
            text-align: center;
            padding: 20px;
            background-color: #ffffff;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 600px;
        }
        .gallery, .resources, .video-gallery, .instagram-reels {
            margin: 20px auto;
            max-width: 1200px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Gallery background support */
        .gallery {
            --gallery-bg: url('./Images/galleryBG.jpg'); /* update path as needed */
            background-image: var(--gallery-bg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;
        }
        /* Darken edges, add subtle center highlight so carousel images pop */
        .gallery::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.45); /* slightly darker to increase contrast */
            z-index: 0;
            border-radius: 10px;
            pointer-events: none;
        }
        /* Soft centered vignette/highlight */
        .gallery::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at center, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.06) 25%, rgba(0,0,0,0) 60%);
            z-index: 0;
            border-radius: 10px;
            pointer-events: none;
            mix-blend-mode: overlay;
        }
        /* Make gallery children sit above the overlay */
        .gallery > * {
            position: relative;
            z-index: 1;
        }

        /* Make carousel images pop: subtle shadow and boost contrast */
        .carousel-image {
            box-shadow: 0 12px 30px rgba(0,0,0,0.45);
            filter: contrast(1.06) saturate(1.05);
        }

        /* Carousel Styles üîß */
        /* Center the carousel and limit width for web */
        .carousel {
            position: relative;
            overflow: hidden;
            max-width: 700px; /* center width */
            margin: 0 auto;   /* center horizontally */
        }
        .carousel-track-container {
            overflow: hidden;
        }
        .carousel-track {
            display: flex;
            transition: transform 0.5s ease;
            padding: 0;
            margin: 0;
            list-style: none;
            width: 100%;
        }
        .carousel-slide {
            min-width: 100%;
            box-sizing: border-box;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* Slightly reduced image height for web and maintain cover */
        .carousel-image {
            max-width: 100%;
            height: 300px;    /* smaller height for web */
            width: auto;
            object-fit: cover;
            border-radius: 8px;
            display: block;
        }
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .carousel-button.prev { left: 6px; }
        .carousel-button.next { right: 6px; }
        .carousel-dots {
            text-align: center;
            margin-top: 10px;
        }
        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: none;
            margin: 0 5px;
            background: #ddd;
            display: inline-block;
            cursor: pointer;
        }
        .carousel-dot.current-slide {
            background: #333;
        }

        /* Responsive adjustments */
        @media (min-width: 700px) and (max-width: 1024px) {
            .carousel { max-width: 95%; }
            .carousel-image { height: 240px; }
        }

        /* Video gallery responsive grid */
        .video-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            justify-items: center;
            align-items: start;
        }
        .video-gallery iframe, .video-gallery .video-iframe {
            width: 100%;
            max-width: 560px;
            height: 315px;
            border: 0;
            border-radius: 8px;
            display: block;
            margin: 10px auto;
        }
        @media (max-width: 760px) {
            .video-grid { grid-template-columns: 1fr; }
            .video-gallery iframe, .video-gallery .video-iframe { height: 240px; max-width: 100%; }
        }

        .video-fallback {
            text-align: center;
            margin-top: 8px;
            font-size: 14px;
            color: #333;
        }
        .video-fallback a { color: #0066cc; text-decoration: underline; }

        /* Instagram reel/embed styling */
        .instagram-reels {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            justify-items: center;
            align-items: start;
        }
        .instagram-reels .insta-grid {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
        }
        .instagram-reels img { max-width: 160px; border-radius: 6px; }
        .instagram-reels .insta-embed { width: 100%; max-width: 540px; }
        .instagram-reels .insta-fallback { font-size: 14px; text-align: center; margin-top: 8px; }
        .instagram-reels .insta-fallback a { color: #0066cc; text-decoration: underline; }

        /* Thumbnail for opening reel in modal */
        .insta-thumb {
            cursor: pointer;
            width: 160px;
            height: 280px;
            object-fit: cover;
            border-radius: 6px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            transition: transform .12s ease, box-shadow .12s ease;
            position: relative;
        }
        .insta-thumb:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(0,0,0,0.18); }
        .insta-thumb::after {
            content: '\25B6'; /* play icon */
            position: absolute;
            right: 10px;
            bottom: 10px;
            background: rgba(0,0,0,0.6);
            color: #fff;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        /* Modal for instagram reel */
        .insta-modal {
            display: none;
            position: fixed;
            inset: 0;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.85);
            z-index: 3000;
            padding: 20px;
        }
        .insta-modal.open { display:flex; }
        .insta-modal-content {
            background: #fff;
            border-radius: 10px;
            max-width: 720px;
            width: 100%;
            padding: 12px;
            position: relative;
        }
        .insta-modal .close-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #ff4444;
            width: 36px;
            height: 36px;
            font-size: 18px;
            border-radius: 50%;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        .insta-modal .insta-modal-body { text-align: center; }
        .insta-modal .insta-modal-body .instagram-media { margin: 0 auto; }
        .insta-modal .insta-modal-body iframe { width: 100%; max-width: 540px; height: 540px; border: 0; }
        @media (max-width: 760px) { .insta-modal .insta-modal-body iframe { height: 420px; } }

        footer {
            text-align: center;
            padding: 20px;
            background-color: #d9f0ff;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            text-align: center;
            position: relative;
        }
        .modal-content img {
            width: 100%;
            border-radius: 10px;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #ff0000;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 16px;
        }
        .pampletImg{
            width: 200px;
            height: 200px;
        }

        /* News gallery thumbnails */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            align-items: start;
        }
        .news-thumb {
            width: 100%;
            height: 90px;
            object-fit: cover;
            border-radius: 6px;
            cursor: zoom-in;
            transition: transform .18s ease, box-shadow .18s ease;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        }
        .news-thumb:hover {
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 10px 30px rgba(0,0,0,0.22);
        }

        /* Lightbox styles */
        .lightbox {
            position: fixed;
            inset: 0;
            display: none;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            padding: 20px;
        }
        .lightbox.open { display:flex; }
        .lightbox-img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 8px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.6);
        }
        .lightbox-close, .lightbox-prev, .lightbox-next {
            position: absolute;
            background: rgba(255,255,255,0.06);
            color: #fff;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size: 20px;
        }
        .lightbox-close { top: 20px; right: 20px; }
        .lightbox-prev { left: 20px; top: 50%; transform: translateY(-50%); }
        .lightbox-next { right: 20px; top: 50%; transform: translateY(-50%); }
        .lightbox-caption {
            display: none !important;
            color: #fff;
            margin-top: 10px;
            text-align: center;
            font-size: 14px;
        }
    </style> 
</head>
<body>

<header>
    <img src="./Images/logo/Logo.jpg" alt="Logo">
    <h1>‡§∂‡§ø‡§µ‡§∏‡•á‡§®‡§æ - ‡§â‡§¶‡•ç‡§ß‡§µ ‡§¨‡§æ‡§≥‡§æ‡§∏‡§æ‡§π‡•á‡§¨ ‡§†‡§æ‡§ï‡§∞‡•á</h1>
</header>

<section class="profile-section">
    <h2>‡§∂‡•ç‡§∞‡•Ä ‡§Ö‡§®‡§ø‡§≤ ‡§¨‡§æ‡§™‡•Ç ‡§Ø‡§æ‡§¶‡§µ</h2>
    <p>‡§â‡§ö‡§ó‡§æ‡§µ ‡§ú‡§ø‡§≤‡•ç‡§π‡§æ ‡§™‡§∞‡§ø‡§∑‡§¶ 37</p>
    <p>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: 9503086767</p>
    <p>‡§à‡§Æ‡•á‡§≤: raju_yadav_5475@gmail.com</p>
</section>

<section class="gallery">
    <h2>‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ó‡•Ö‡§≤‡§∞‡•Ä</h2>
    <div class="carousel" aria-roledescription="carousel">
        <button class="carousel-button prev" aria-label="Previous slide">&#10094;</button>
        <div class="carousel-track-container">
            <ul class="carousel-track">
                <li class="carousel-slide current-slide">
                    <img class="carousel-image" src="./pamplet1.jpeg" alt="Pamplet 1">
                </li>
                <li class="carousel-slide">
                    <img class="carousel-image" src="./pamplet2.jpeg" alt="Pamplet 2">
                </li>
                <li class="carousel-slide">
                    <img class="carousel-image" src="./pamplet3.jpeg" alt="Pamplet 3">
                </li>
            </ul>
        </div>
        <button class="carousel-button next" aria-label="Next slide">&#10095;</button>
        <div class="carousel-dots">
            <button class="carousel-dot current-slide" aria-label="Slide 1"></button>
            <button class="carousel-dot" aria-label="Slide 2"></button>
            <button class="carousel-dot" aria-label="Slide 3"></button>
        </div>
    </div>
</section>

<section class="resources">
    <h2>‡§ö‡§æ‡§≤‡•Ç ‡§∏‡§π‡§ï‡§æ‡§∞‡•ç‡§Ø</h2>
    <div class="news-gallery">
        <div class="news-grid">
            <img class="news-thumb" src="./Images/bannerImg_1.jpeg" alt="News banner 1" data-full="./Images/bannerImg_1.jpeg">
            <img class="news-thumb" src="./Images/bannerImg_2.jpeg" alt="News banner 2" data-full="./Images/bannerImg_2.jpeg">
            <img class="news-thumb" src="./Images/bannerImg_3.jpeg" alt="News banner 3" data-full="./Images/bannerImg_3.jpeg">
            <img class="news-thumb" src="./Images/newsImg_1.jpeg" alt="News 1" data-full="./Images/newsImg_1.jpeg">
            <img class="news-thumb" src="./Images/newsImg_2.jpeg" alt="News 2" data-full="./Images/newsImg_2.jpeg">
            <img class="news-thumb" src="./Images/newsImg_3.jpeg" alt="News 3" data-full="./Images/newsImg_3.jpeg">
            <img class="news-thumb" src="./Images/newsImg_4.jpeg" alt="News 4" data-full="./Images/newsImg_4.jpeg">
            <img class="news-thumb" src="./Images/newsImg_5.jpeg" alt="News 5" data-full="./Images/newsImg_5.jpeg">
            <img class="news-thumb" src="./Images/newsImg_6.jpeg" alt="News 6" data-full="./Images/newsImg_6.jpeg">
            <img class="news-thumb" src="./Images/newsImg_7.jpeg" alt="News 7" data-full="./Images/newsImg_7.jpeg">
            <img class="news-thumb" src="./Images/newsImg_8.jpeg" alt="News 8" data-full="./Images/newsImg_8.jpeg">
            <img class="news-thumb" src="./Images/newsImg_9.jpg" alt="News 9" data-full="./Images/newsImg_9.jpeg">
            <img class="news-thumb" src="./Images/newsImg_10.jpg" alt="News 10" data-full="./Images/newsImg_10.jpeg">
            <img class="news-thumb" src="./Images/newsImg_11.jpg" alt="News 11" data-full="./Images/newsImg_11.jpeg">
            <img class="news-thumb" src="./Images/newsImg_12.jpg" alt="News 12" data-full="./Images/newsImg_12.jpeg">
        </div>
    </div>
</section> 

<section class="video-gallery">
    <h2>‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì ‡§ó‡•Ö‡§≤‡§∞‡•Ä</h2>
    <div class="video-grid">
        <iframe class="video-iframe" src="https://www.youtube.com/embed/vZHroXhF92k?si=C2DMeZ7Smy3TnweW" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        <iframe class="video-iframe" src="https://www.youtube-nocookie.com/embed/g84ki1m-Mrc" frameborder="0" loading="lazy" referrerpolicy="no-referrer-when-downgrade" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen title="Added video"></iframe>
    </div>
</section>

<section class="instagram-reels">
    <h2>Instagram Reels</h2>
    <div class="insta-grid">
        <!-- Thumbnail that opens modal -->
        <img class="insta-thumb" src="./Images/reelThumbs/reelThumb_1.png" alt="Reel thumbnail" data-permalink="https://www.instagram.com/reel/DUTIT3bDXZZ/">
        <img class="insta-thumb" src="./Images/reelThumbs/reelThumb_1.png" alt="Reel thumbnail" data-permalink="https://www.instagram.com/reel/DUTIT3bDXZZ/">
        <img class="insta-thumb" src="./Images/reelThumbs/reelThumb_1.png" alt="Reel thumbnail" data-permalink="https://www.instagram.com/reel/DUTIT3bDXZZ/">
    </div>

    <div class="insta-embed" style="margin-top:12px;">
        <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/reel/DUTIT3bDXZZ/?utm_source=ig_embed&amp;utm_campaign=loading" data-instgrm-version="14" style="background:#FFF; border:0; margin: 0 auto; max-width:540px; min-width:326px; width:99%; padding:0;">
            <div style="padding:16px;">
                <a href="https://www.instagram.com/reel/DUTIT3bDXZZ/" target="_blank" rel="noopener noreferrer">Watch this reel on Instagram</a>
            </div>
        </blockquote>
        <script async defer src="//www.instagram.com/embed.js"></script>
        <div class="insta-fallback">If the reel doesn't load here, <a href="https://www.instagram.com/reel/DUTIT3bDXZZ/" target="_blank" rel="noopener noreferrer">open it on Instagram</a>.</div>
    </div>

    <!-- Modal for playing reel on same page -->
    <div class="insta-modal" id="insta-modal" aria-hidden="true">
        <div class="insta-modal-content" role="dialog" aria-modal="true">
            <button class="close-btn" id="insta-close" aria-label="Close">&times;</button>
            <div class="insta-modal-body" id="insta-modal-body">
                <!-- blockquote is injected here when modal opens -->
                <div class="insta-fallback">If the reel doesn't load here, <a href="https://www.instagram.com/reel/DUTIT3bDXZZ/" target="_blank" rel="noopener noreferrer">open it on Instagram</a>.</div>
            </div>
        </div>
    </div>
</section> 

<footer>
    <p>&copy; 2026 Profile Page</p>
</footer>

<!-- Modal Popup -->
<div class="modal" id="modal">
    <div class="modal-content">
        <button class="close-btn" id="close-btn">&times;</button>
        <img src="mockup.jpg" alt="Mockup">
    </div>
</div>

<script>
    // // Show modal on scroll
    // window.addEventListener('scroll', () => {
    //     const modal = document.getElementById('modal');
    //     if (window.scrollY > 200) {
    //         modal.style.display = 'flex';
    //     }
    // });

    // // Close modal
    // document.getElementById('close-btn').addEventListener('click', () => {
    //     const modal = document.getElementById('modal');
    //     modal.style.display = 'none';
    // });

    // Carousel functionality
    (function() {
        const track = document.querySelector('.carousel-track');
        if (!track) return;
        const slides = Array.from(track.children);
        const nextButton = document.querySelector('.carousel-button.next');
        const prevButton = document.querySelector('.carousel-button.prev');
        const dotsNav = document.querySelector('.carousel-dots');
        const dots = dotsNav ? Array.from(dotsNav.children) : [];

        const setSlidePosition = (slide, index) => {
            slide.style.left = (index * 100) + '%';
        };
        slides.forEach(setSlidePosition);

        let currentIndex = slides.findIndex(s => s.classList.contains('current-slide'));
        if (currentIndex < 0) currentIndex = 0;

        function moveToSlide(targetIndex) {
            track.style.transform = 'translateX(-' + (targetIndex * 100) + '%)';
            slides.forEach(s => s.classList.remove('current-slide'));
            slides[targetIndex].classList.add('current-slide');
            if (dots.length) {
                dots.forEach(d => d.classList.remove('current-slide'));
                dots[targetIndex].classList.add('current-slide');
            }
            currentIndex = targetIndex;
        }

        function showNext() {
            moveToSlide((currentIndex + 1) % slides.length);
        }
        function showPrev() {
            moveToSlide((currentIndex - 1 + slides.length) % slides.length);
        }

        let autoplay = setInterval(showNext, 4000);
        function resetAutoplay() {
            clearInterval(autoplay);
            autoplay = setInterval(showNext, 4000);
        }

        if (nextButton) nextButton.addEventListener('click', () => { showNext(); resetAutoplay(); });
        if (prevButton) prevButton.addEventListener('click', () => { showPrev(); resetAutoplay(); });

        dots.forEach((dot, idx) => {
            dot.addEventListener('click', () => { moveToSlide(idx); resetAutoplay(); });
        });

        const carousel = document.querySelector('.carousel');
        if (carousel) {
            carousel.addEventListener('mouseenter', () => clearInterval(autoplay));
            carousel.addEventListener('mouseleave', () => resetAutoplay());
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') showNext();
            if (e.key === 'ArrowLeft') showPrev();
        });
    })();

    // News gallery lightbox (robust image loading for jpeg/jpg)
    (function() {
        const thumbs = Array.from(document.querySelectorAll('.news-thumb'));
        if (thumbs.length === 0) return;
        const lightbox = document.createElement('div');
        lightbox.className = 'lightbox';
        lightbox.innerHTML = `
            <button class="lightbox-close" aria-label="Close">&times;</button>
            <button class="lightbox-prev" aria-label="Previous">&#10094;</button>
            <img class="lightbox-img" src="" alt="">
            <button class="lightbox-next" aria-label="Next">&#10095;</button>
            <div class="lightbox-caption" aria-live="polite"></div>
        `;
        document.body.appendChild(lightbox);

        const lbImg = lightbox.querySelector('.lightbox-img');
        const lbCaption = lightbox.querySelector('.lightbox-caption');
        const closeBtn = lightbox.querySelector('.lightbox-close');
        const prevBtn = lightbox.querySelector('.lightbox-prev');
        const nextBtn = lightbox.querySelector('.lightbox-next');

        let currentIndex = 0;
        const imgs = thumbs.map(t => ({src: t.dataset.full || t.src, thumb: t.src, alt: t.alt || ''}));

        function tryAlternateExt(url) {
            // try swapping .jpg <-> .jpeg
            return url.replace(/\.(jpe?g)$/i, (m, ext) => (ext.toLowerCase() === 'jpg' ? '.jpeg' : '.jpg'));
        }

        function openLightbox(index) {
            currentIndex = index;
            lbImg._triedFallback = false;
            // attempt primary src
            const primary = imgs[currentIndex].src;
            const thumb = imgs[currentIndex].thumb;

            function setSrc(src) {
                lbImg.style.display = 'block';
                lbImg.src = src;
                lbImg.alt = imgs[currentIndex].alt;
            }

            lbImg.onerror = function() {
                if (lbImg._triedFallback) {
                    // try swapping extension
                    const alt = tryAlternateExt(lbImg.src);
                    if (alt !== lbImg.src) {
                        lbImg._triedFallback = 'alt-ext';
                        setSrc(alt);
                        return;
                    }
                    // try thumbnail as final fallback
                    if (thumb && thumb !== lbImg.src) {
                        lbImg._triedFallback = 'thumb';
                        setSrc(thumb);
                        return;
                    }
                    // give up
                    lbImg.style.display = 'none';
                    // caption hidden
                } else {
                    lbImg._triedFallback = true;
                    // try thumbnail first if primary is different
                    if (thumb && thumb !== primary) {
                        setSrc(thumb);
                        return;
                    }
                    // else try alternate extension
                    const alt = tryAlternateExt(primary);
                    if (alt !== primary) setSrc(alt);
                    else {
                        lbImg.style.display = 'none';
                        // caption hidden
                    }
                }
            };

            lbImg.onload = function() {
                lbImg.style.display = 'block';
            };

            setSrc(primary);
            lightbox.classList.add('open');
            document.body.style.overflow = 'hidden';
        }
        function closeLightbox() {
            lightbox.classList.remove('open');
            document.body.style.overflow = '';
        }
        function showNext() {
            openLightbox((currentIndex + 1) % imgs.length);
        }
        function showPrev() {
            openLightbox((currentIndex - 1 + imgs.length) % imgs.length);
        }

        thumbs.forEach((t, i) => t.addEventListener('click', () => openLightbox(i)));
        closeBtn.addEventListener('click', closeLightbox);
        nextBtn.addEventListener('click', showNext);
        prevBtn.addEventListener('click', showPrev);
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) closeLightbox();
        });
        document.addEventListener('keydown', (e) => {
            if (!lightbox.classList.contains('open')) return;
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowRight') showNext();
            if (e.key === 'ArrowLeft') showPrev();
        });
    })();

    // Instagram modal for reel thumbnail
    (function() {
        const thumbs = Array.from(document.querySelectorAll('.insta-thumb'));
        if (!thumbs.length) return;
        const modal = document.getElementById('insta-modal');
        const modalBody = document.getElementById('insta-modal-body');
        const closeBtn = document.getElementById('insta-close');

        function loadInstagramEmbedScript(cb) {
            if (window.instgrm && typeof window.instgrm.Embeds !== 'undefined') {
                cb();
                return;
            }
            // load script once
            if (document.querySelector('script[src="//www.instagram.com/embed.js"]')) {
                // wait for it to initialize
                const t = setInterval(() => {
                    if (window.instgrm && window.instgrm.Embeds) {
                        clearInterval(t);
                        cb();
                    }
                }, 150);
                return;
            }
            const s = document.createElement('script');
            s.src = '//www.instagram.com/embed.js';
            s.async = true;
            s.defer = true;
            s.onload = cb;
            document.body.appendChild(s);
        }

        function openModalWith(permalink) {
            // insert blockquote
            modalBody.querySelectorAll('blockquote.instagram-media').forEach(n => n.remove());
            const block = document.createElement('blockquote');
            block.className = 'instagram-media';
            block.setAttribute('data-instgrm-permalink', permalink + '?utm_source=ig_embed&amp;utm_campaign=loading');
            block.setAttribute('data-instgrm-version', '14');
            block.style = 'background:#FFF; border:0; margin: 0 auto; max-width:540px; min-width:326px; width:99%; padding:0;';
            block.innerHTML = '<div style="padding:16px;"><a href="' + permalink + '" target="_blank" rel="noopener noreferrer">Watch this reel on Instagram</a></div>';
            modalBody.insertBefore(block, modalBody.firstChild);

            // load/initialize embed script then process
            loadInstagramEmbedScript(function() {
                try { window.instgrm.Embeds.process(); } catch (e) { /* ignore */ }
            });

            modal.classList.add('open');
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.remove('open');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            // cleanup injected blockquote if any
            modalBody.querySelectorAll('blockquote.instagram-media').forEach(n => n.remove());
        }

        thumbs.forEach(t => {
            t.addEventListener('click', () => {
                const pl = t.dataset.permalink || t.getAttribute('data-permalink');
                if (!pl) return window.open('https://www.instagram.com/', '_blank');
                openModalWith(pl);
            });
        });

        closeBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && modal.classList.contains('open')) closeModal(); });
    })();

</script>

</body>
</html>